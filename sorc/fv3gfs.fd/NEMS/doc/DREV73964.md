DREV73964: UGCS-Seasonal 0.2 {#milestone_DREV73964}
============================

\date 4/28/2016

Description
-----------

UGCS-Seasonal 0.2 (DREV73964) is a three-way configuration of the
[Global Spectral Model (GSM)](http://www.emc.ncep.noaa.gov/index.php?branch=GFS),
[Modular Ocean Model 5 (MOM5)](http://mom-ocean.org/web), and 
[Los Alamos Sea Ice Model (CICE)](http://oceans11.lanl.gov/trac/CICE/). 
GSM runs on a 
\ref GRID_gsm "T126 grid", and MOM5 and CICE run on a 
\ref GRID_mom5_0p5deg_tripole "0.5 degree tripolar global grid with 0.25 degree tropics".
A full set of fields is
transferred among components using the NEMS mediator (see 
[exchange field spreadsheet](https://docs.google.com/spreadsheets/d/1Tae7NoGbIfti38QxvmzPy7Z4tIWQgY4zSdq5Xcx9MDk/edit?usp=sharing)).
Relative to 
\ref milestone_DREV58214 "UGCS-Seasonal 0.1",
this revision includes additional verified exchange field connections
involving sea ice and improved treatment of coastlines. Initialization
is performed using Climate Forecast System Reanalysis (CFSR) data for
April 1, 2015 that is consistent for all components. There is a cold
start initialization implemented using a separate run sequence.

This revision has been run for 30 days and exhibits behavior that is
Earth-like. The UGCS-Seasonal 0.2 revision is a starting point for
further physical analysis and integration with workflow and data
assimilation components.

A primary limitation of the revision is that it has not been optimized
for performance or memory. In addition, it appears to have a porting
issue. It has been tested successfully on the NOAA research platform
theia and the EMC operational platform wcoss, but it fails after
several days on the NCAR yellowstone computer. These are all IBM
clusters. Another technical limitation is that a coordinated restart
capability has not yet been implemented. This prevented the revision
from being run longer than 30 days.

A known science issue is the presence of unrealistic wind stresses in
the northern ocean.

Run Sequences
-------------

UGCS-Seasonal includes two run sequences, a cold start sequence and a
time integration sequence.

Cold start sequence: The first cold start sequence initializes
components using a miinimal set of files ingested by GSM. The cold
start sequence only needs to run for a half hour. However, it runs for
an hour because there is a limitation on running less than an hour in
EMC scripts.

    runSeq::
      @1800.0
        @600.0
          MED MedPhase_prep_atm
          MED -> ATM :remapMethod=redist
          ATM
          ATM -> MED :remapMethod=redist
          MED MedPhase_prep_ice
          MED -> ICE :remapMethod=redist
          ICE
          ICE -> MED :remapMethod=redist
          MED MedPhase_atm_ocn_flux
          MED MedPhase_accum_fast
        @
        MED MedPhase_prep_ocn
        MED -> OCN :remapMethod=redist
        OCN
        OCN -> MED :remapMethod=redist
      @
    ::
    
Time integration sequence: The second run sequence, shown below, is
for the time integration loop. It is initialized by restart files
generated by the cold start sequence. As in UGCS--Seasonal 0.1, there
is a fast and a slow loop, at 10 minutes and 30 minutes, respectively.

    runSeq::
      @1800.0
        MED MedPhase_prep_ocn
        MED -> OCN :remapMethod=redist
        OCN
        @600.0
          MED MedPhase_prep_ice
          MED MedPhase_prep_atm
          MED -> ATM :remapMethod=redist
          MED -> ICE :remapMethod=redist
          ATM
          ICE
          ATM -> MED :remapMethod=redist
          ICE -> MED :remapMethod=redist
          MED MedPhase_atm_ocn_flux
          MED MedPhase_accum_fast
        @
        OCN -> MED :remapMethod=redist
      @
    ::

Validation
----------

Diagnostics from a 5-day run are shown in 
[this slide set](http://esgf.esrl.noaa.gov/site_media/projects/couplednems/pres_1604_DREV73550_mendez.pptx), from
M. Mendez, EMC. The revision analyzed was DREV73550, which was shown
to be bit-for-bit with DREV73964

Diagnostics from a 30-day run are shown in this 
[slide set](http://esgf.esrl.noaa.gov/site_media/projects/couplednems/ugcsMerge_short.pptx), 
from M. Mendez, EMC. The revision analyzed was DREV74294, which was
shown to be bit-for-bit with 
DREV73946. In addition to results from
the UGCS-Seasonal 0.2 system, these slides show results from CFSv2,
CDAS, and a subsequent version of the UGCS-Seasonal code, after a
merge which updated the GSM version.

These results are from a development system and do not represent a NOAA prediction or product. 
Build, Run, and Restart
Download and Build

Instructions on how to download and build a NEMS application are in the 
\ref documentation "NEMS User's Guide and Reference".
Running UGCS-Seasonal with a cold start requires additional
instructions, below.  Cold Start and Run

Compsets that can be run with this revision are:

 * `20150401short_nems_gsm_cice_mom5` (1 day run)
 * `20150401_nems_gsm_cice_mom5` (5 day run)
 * `20150401long_nems_gsm_cice_mom5` (30 day run)
 * `20150401short_nemscold_gsm_cice_mom5` (cold start compset, 1 hr)

To run compsets, start within the UGCS-Seasonal directory and execute
the
\ref running "NEMSCompsetRun tool" by typing:

    ./NEMS/NEMSCompsetRun -compset <compset name>

If you leave off the `-compset` argument, CompsetRun will read the
compset list from a local file. (See more about CompsetRun options
\ref running "here".)

To initialize a new case of the UGCS-Seasonal from a cold start, run
the cold start compset, `20150401short_nemscold_gsm_cice_mom5`, to
generate initial mediator restart files.  That compset runs the
atm/ice/ocean sequentially for 1 hour. It will generate some initial
mediator restart files consisting of initial values for coupling
fields consistent with the current atmosphere, ocean, and sea ice
conditions.  You then use those initial mediator files to startup a
standard run with the same model initial conditions and initial model
date as the cold start run.  To do this, run the coldstart compset
using CompsetRun as specified above with the compset,
`20150401short_nemscold_gsm_cice_mom5`.

After running the cold start compset, go into `NEMS/NEMSCompsetRun` and
modify "setup_med_nems" to pre-stage the cold start mediator restart
files instead of whatever files are set by default.  This is done in a
section that looks like,

    cp -f ${DATADIR}/MED_NEMS/${nemsgrid}${nemsgridinp}/* ${RUNDIR}
    # cp -f /scratch3/NCEPDEV/stmp1/Anthony.Craig/UGCS-Seasonal.r72808/20150401short_nemscold_gsm_cice_mom5/mediator*restart* ${RUNDIR}             

Comment out the first line and uncomment the second line. In the
second line, set the path to the cold start run directory where the
cold start case just ran.  This will copy the mediator restart files
from your cold start run directory into the new run directory.

Once the cold start is done and the `NEMSCompsetRun` is modified, run a
standard compset like `20150401long_nems_gsm_cice_mom5` to advance the
model from the initial conditions.  The system will start with the
same atmosphere, ocean, and ice initial conditions as the cold start
run plus the new mediator restart files, and the model will run
concurrently.